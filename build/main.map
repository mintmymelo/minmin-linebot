{"version":3,"sources":["webpack:///webpack/bootstrap 7ee1a165ac58d2b30abe","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"@line/bot-sdk\"","webpack:///external \"geoip-lite\"","webpack:///external \"dotenv\""],"names":["express","require","line","geoip","config","app","channelAccessToken","channelSecret","client","Client","userIPAddress","post","middleware","req","res","ip","headers","connection","remoteAddress","socket","split","Promise","all","body","events","map","handleEvent","then","result","json","get","send","event","console","log","type","message","handleMessageEvent","resolve","getCurrentLocation","msg","text","eventText","toLowerCase","replyMessage","replyToken","set","process","env","PORT","listen"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7ee1a165ac58d2b30abe","const express = require('express');\nconst line = require('@line/bot-sdk');\nvar geoip = require('geoip-lite');\n\nrequire('dotenv').config();\n\nconst app = express();\n\nconst config = {\n    channelAccessToken: 'iz4jrqAaHmI4hRueYLq/inHkuUtK3GEK8+1tJ7DDLPLq4KV4lDkm61klM2o59UpF7Gx+tv5kJ+7DfJZHKfQAuS051Uw2f9JaFAJe1+z+AkuCoJ53d0TGi+8/HlAas7X055k+3Q//EoBfM1sRPts64QdB04t89/1O/w1cDnyilFU=',\n    channelSecret: '811a41c998754baaff7e2c39f6ffd20f'\n};\n\nconst client = new line.Client(config);\n\nconst userIPAddress = '::1';\n\napp.post('/webhook', line.middleware(config), (req, res) => {\n    var ip = (req.headers['x-forwarded-for'] ||\n    req.connection.remoteAddress ||\n    req.socket.remoteAddress ||\n    req.connection.socket.remoteAddress).split(\",\")[0];\n\n    Promise\n        .all(req.body.events.map(handleEvent))\n        .then((result) => res.json(result));\n});\n\napp.get('/', (req, res) => {\n    // var ip = (req.headers['x-forwarded-for'] ||\n    // req.connection.remoteAddress ||\n    // req.socket.remoteAddress ||\n    // req.connection.socket.remoteAddress).split(\",\")[0];\n    // res.send(ip)\n    res.send('minmin bot')\n});\n\nfunction handleEvent(event) {\n    console.log(event);\n    if (event.type === 'message' && event.message.type === 'text') {\n        handleMessageEvent(event);\n    } else {\n        return Promise.resolve(null);\n    }\n}\n\nfunction getCurrentLocation() {\n    console.log('==============current location==================');\n    console.log(userIPAddress);  \n    console.log('================================================');  \n}\n\nfunction handleMessageEvent(event) {\n    var msg = {\n        type: 'text',\n        text: 'สวัสดีครัช'\n    };\n\n    var eventText = event.message.text.toLowerCase();\n\n    if (eventText === 'image') {\n        msg = {\n            'type': 'image',\n            'originalContentUrl': 'https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100',\n            'previewImageUrl': 'https://images.performgroup.com/di/library/GOAL/a6/bb/fifa-18-ronaldo_lx3r88bpjpk91re36ukdgomrj.jpg?t=2027563652&w=620&h=430'\n        }\n    } else if (eventText === 'location' || 'อยู่ไหน') {\n        getCurrentLocation();\n        msg = {\n            \"type\": \"location\",\n            \"title\": \"my location\",\n            \"address\": \"〒150-0002 東京都渋谷区渋谷２丁目２１−１\",\n            \"latitude\": 35.65910807942215,\n            \"longitude\": 139.70372892916203\n        }\n    } else if (eventText === 'template button') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a buttons template\",\n            \"template\": {\n                \"type\": \"buttons\",\n                \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                \"title\": \"Menu\",\n                \"text\": \"Please select\",\n                \"actions\": [{\n                    \"type\": \"postback\",\n                    \"label\": \"Buy\",\n                    \"data\": \"action=buy&itemid=123\"\n                }, {\n                    \"type\": \"postback\",\n                    \"label\": \"Add to cart\",\n                    \"data\": \"action=add&itemid=123\"\n                }, {\n                    \"type\": \"uri\",\n                    \"label\": \"View detail\",\n                    \"uri\": \"http://example.com/page/123\"\n                }]\n            }\n        }\n    } else if (eventText === 'template confirm') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a confirm template\",\n            \"template\": {\n                \"type\": \"confirm\",\n                \"text\": \"Are you sure?\",\n                \"actions\": [{\n                    \"type\": \"message\",\n                    \"label\": \"Yes\",\n                    \"text\": \"yes\"\n                }, {\n                    \"type\": \"message\",\n                    \"label\": \"No\",\n                    \"text\": \"no\"\n                }]\n            }\n        }\n    } else if (eventText === 'carousel') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a carousel template\",\n            \"template\": {\n                \"type\": \"carousel\",\n                \"columns\": [\n                    {\n                        \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                        \"title\": \"this is menu\",\n                        \"text\": \"description\",\n                        \"actions\": [\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Buy\",\n                                \"data\": \"action=buy&itemid=111\"\n                            },\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Add to cart\",\n                                \"data\": \"action=add&itemid=111\"\n                            },\n                            {\n                                \"type\": \"uri\",\n                                \"label\": \"View detail\",\n                                \"uri\": \"http://example.com/page/111\"\n                            }\n                        ]\n                    },\n                    {\n                        \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                        \"title\": \"this is menu\",\n                        \"text\": \"description\",\n                        \"actions\": [\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Buy\",\n                                \"data\": \"action=buy&itemid=222\"\n                            },\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Add to cart\",\n                                \"data\": \"action=add&itemid=222\"\n                            },\n                            {\n                                \"type\": \"uri\",\n                                \"label\": \"View detail\",\n                                \"uri\": \"http://example.com/page/222\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        }\n    }\n\n    return client.replyMessage(event.replyToken, msg);\n}\n\napp.set('port', (process.env.PORT || 5000));\n\napp.listen(app.get('port'), function () {\n    console.log('run at port', app.get('port'));\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"@line/bot-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@line/bot-sdk\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"geoip-lite\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"geoip-lite\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}