{"version":3,"sources":["webpack:///webpack/bootstrap c534356767bf42790fc0","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"@line/bot-sdk\"","webpack:///external \"dotenv\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./node_modules/geoip-lite/lib/geoip.js","webpack:///external \"net\"","webpack:///./node_modules/geoip-lite/lib/utils.js","webpack:///./node_modules/geoip-lite/lib/fsWatcher.js","webpack:///external \"async\""],"names":["express","require","line","geoip","config","app","channelAccessToken","channelSecret","client","Client","post","middleware","req","res","Promise","all","body","events","map","handleEvent","then","result","json","get","send","event","console","log","type","message","handleMessageEvent","resolve","getCurrentLocation","ip","geo","lookup","msg","text","eventText","toLowerCase","replyMessage","replyToken","set","process","env","PORT","listen"],"mappings":"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EA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,YAAY,yBAAyB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,QAAQ;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA,OAAO;;AAEP,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACjgBA,gC;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,uBAAuB;AACtC;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,aAAa,KAAK;AAClB;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,QAAQ;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iCAAiC,IAAI,UAAU,IAAI,UAAU,IAAI;AACjE,kCAAkC,IAAI,UAAU,IAAI;AACpD,iCAAiC,IAAI,UAAU,IAAI;AACnD,6BAA6B,IAAI,UAAU,IAAI,UAAU,IAAI;AAC7D,kCAAkC,IAAI,UAAU,IAAI;AACpD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;AACA;;AAEA;;AAEA;AACA,E;;;;;;ACjGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC7EA,kC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c534356767bf42790fc0","const express = require('express');\nconst line = require('@line/bot-sdk');\nvar geoip = require('geoip-lite');\n\nrequire('dotenv').config();\n\nconst app = express();\n\nconst config = {\n    channelAccessToken: 'iz4jrqAaHmI4hRueYLq/inHkuUtK3GEK8+1tJ7DDLPLq4KV4lDkm61klM2o59UpF7Gx+tv5kJ+7DfJZHKfQAuS051Uw2f9JaFAJe1+z+AkuCoJ53d0TGi+8/HlAas7X055k+3Q//EoBfM1sRPts64QdB04t89/1O/w1cDnyilFU=',\n    channelSecret: '811a41c998754baaff7e2c39f6ffd20f'\n};\n\nconst client = new line.Client(config);\n\napp.post('/webhook', line.middleware(config), (req, res) => {\n    Promise\n        .all(req.body.events.map(handleEvent))\n        .then((result) => res.json(result));\n});\n\napp.get('/', (req, res) => {\n    res.send('minmin server')\n});\n\nfunction handleEvent(event) {\n    console.log(event);\n    if (event.type === 'message' && event.message.type === 'text') {\n        handleMessageEvent(event);\n    } else {\n        return Promise.resolve(null);\n    }\n}\n\nfunction getCurrentLocation() {\n    app.get('/', (req, res) => {\n        var ip = req.ip;\n        var geo = geoip.lookup(ip);\n        console.log('==============current location==================');\n        console.log(ip); \n        console.log(geo); \n        console.log('================================================');  \n    }); \n}\n\nfunction handleMessageEvent(event) {\n    var msg = {\n        type: 'text',\n        text: 'สวัสดีครัช'\n    };\n\n    var eventText = event.message.text.toLowerCase();\n\n    if (eventText === 'image') {\n        msg = {\n            'type': 'image',\n            'originalContentUrl': 'https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100',\n            'previewImageUrl': 'https://images.performgroup.com/di/library/GOAL/a6/bb/fifa-18-ronaldo_lx3r88bpjpk91re36ukdgomrj.jpg?t=2027563652&w=620&h=430'\n        }\n    } else if (eventText === 'location' || 'อยู่ไหน') {\n        getCurrentLocation();\n        msg = {\n            \"type\": \"location\",\n            \"title\": \"my location\",\n            \"address\": \"〒150-0002 東京都渋谷区渋谷２丁目２１−１\",\n            \"latitude\": 35.65910807942215,\n            \"longitude\": 139.70372892916203\n        }\n    } else if (eventText === 'template button') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a buttons template\",\n            \"template\": {\n                \"type\": \"buttons\",\n                \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                \"title\": \"Menu\",\n                \"text\": \"Please select\",\n                \"actions\": [{\n                    \"type\": \"postback\",\n                    \"label\": \"Buy\",\n                    \"data\": \"action=buy&itemid=123\"\n                }, {\n                    \"type\": \"postback\",\n                    \"label\": \"Add to cart\",\n                    \"data\": \"action=add&itemid=123\"\n                }, {\n                    \"type\": \"uri\",\n                    \"label\": \"View detail\",\n                    \"uri\": \"http://example.com/page/123\"\n                }]\n            }\n        }\n    } else if (eventText === 'template confirm') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a confirm template\",\n            \"template\": {\n                \"type\": \"confirm\",\n                \"text\": \"Are you sure?\",\n                \"actions\": [{\n                    \"type\": \"message\",\n                    \"label\": \"Yes\",\n                    \"text\": \"yes\"\n                }, {\n                    \"type\": \"message\",\n                    \"label\": \"No\",\n                    \"text\": \"no\"\n                }]\n            }\n        }\n    } else if (eventText === 'carousel') {\n        msg = {\n            \"type\": \"template\",\n            \"altText\": \"this is a carousel template\",\n            \"template\": {\n                \"type\": \"carousel\",\n                \"columns\": [\n                    {\n                        \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                        \"title\": \"this is menu\",\n                        \"text\": \"description\",\n                        \"actions\": [\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Buy\",\n                                \"data\": \"action=buy&itemid=111\"\n                            },\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Add to cart\",\n                                \"data\": \"action=add&itemid=111\"\n                            },\n                            {\n                                \"type\": \"uri\",\n                                \"label\": \"View detail\",\n                                \"uri\": \"http://example.com/page/111\"\n                            }\n                        ]\n                    },\n                    {\n                        \"thumbnailImageUrl\": \"https://www.thesun.co.uk/wp-content/uploads/2017/03/fifa-17-2.jpg?strip=all&w=742&quality=100\",\n                        \"title\": \"this is menu\",\n                        \"text\": \"description\",\n                        \"actions\": [\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Buy\",\n                                \"data\": \"action=buy&itemid=222\"\n                            },\n                            {\n                                \"type\": \"postback\",\n                                \"label\": \"Add to cart\",\n                                \"data\": \"action=add&itemid=222\"\n                            },\n                            {\n                                \"type\": \"uri\",\n                                \"label\": \"View detail\",\n                                \"uri\": \"http://example.com/page/222\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        }\n    }\n\n    return client.replyMessage(event.replyToken, msg);\n}\n\napp.set('port', (process.env.PORT || 5000));\n\napp.listen(app.get('port'), function () {\n    console.log('run at port', app.get('port'));\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"@line/bot-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@line/bot-sdk\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","var fs = require('fs');\nvar net = require('net');\nvar path = require('path');\n\nfs.existsSync = fs.existsSync || path.existsSync;\n\nvar utils = require('./utils');\nvar fsWatcher = require('./fsWatcher');\nvar async = require('async');\n\nvar watcherName = 'dataWatcher';\n\n\nvar geodatadir;\n\nif (typeof global.geodatadir === 'undefined'){\n\tgeodatadir = path.join(__dirname, '/../data/');\n} else {\n\tgeodatadir = global.geodatadir;\n}\n\nvar dataFiles = {\n\tcity: path.join(geodatadir, 'geoip-city.dat'),\n\tcity6: path.join(geodatadir, 'geoip-city6.dat'),\n\tcityNames: path.join(geodatadir, 'geoip-city-names.dat'),\n\tcountry: path.join(geodatadir, 'geoip-country.dat'),\n\tcountry6: path.join(geodatadir, 'geoip-country6.dat')\n};\n\nvar privateRange4 = [\n\t\t[utils.aton4('10.0.0.0'), utils.aton4('10.255.255.255')],\n\t\t[utils.aton4('172.16.0.0'), utils.aton4('172.31.255.255')],\n\t\t[utils.aton4('192.168.0.0'), utils.aton4('192.168.255.255')]\n\t]\n\nvar cache4 = {\n\tfirstIP: null,\n\tlastIP: null,\n\tlastLine: 0,\n\tlocationBuffer: null,\n\tlocationRecordSize: 64,\n\tmainBuffer: null,\n\trecordSize: 12\n};\n\nvar cache6 = {\n\tfirstIP: null,\n\tlastIP: null,\n\tlastLine: 0,\n\tmainBuffer: null,\n\trecordSize: 58\n};\n\nvar RECORD_SIZE = 10;\nvar RECORD_SIZE6 = 34\n\nfunction lookup4(ip) {\n\tvar fline = 0;\n\tvar floor = cache4.lastIP;\n\tvar cline = cache4.lastLine;\n\tvar ceil = cache4.firstIP;\n\tvar line;\n\tvar locId;\n\n\tvar buffer = cache4.mainBuffer;\n\tvar locBuffer = cache4.locationBuffer;\n\tvar privateRange = privateRange4;\n\tvar recordSize = cache4.recordSize;\n\tvar locRecordSize = cache4.locationRecordSize;\n\n\tvar i;\n\n\tvar geodata = {\n\t\trange: '',\n\t\tcountry: '',\n\t\tregion: '',\n\t\tcity: '',\n\t\tll: [0, 0]\n\t};\n\n\t// outside IPv4 range\n\tif (ip > cache4.lastIP || ip < cache4.firstIP) {\n\t\treturn null;\n\t}\n\n\t// private IP\n\tfor (i = 0; i < privateRange.length; i++) {\n\t\tif (ip >= privateRange[i][0] && ip <= privateRange[i][1]) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tdo {\n\t\tline = Math.round((cline - fline) / 2) + fline;\n\t\tfloor = buffer.readUInt32BE(line * recordSize);\n\t\tceil  = buffer.readUInt32BE((line * recordSize) + 4);\n\n\t\tif (floor <= ip && ceil >= ip) {\n\t\t\tgeodata.range = [floor, ceil];\n\n\t\t\tif (recordSize === RECORD_SIZE) {\n\t\t\t\tgeodata.country = buffer.toString('utf8', (line * recordSize) + 8, (line * recordSize) + 10);\n\t\t\t} else {\n\t\t\t\tlocId = buffer.readUInt32BE((line * recordSize) + 8) - 1;\n\n\t\t\t\tgeodata.country = locBuffer.toString('utf8', (locId * locRecordSize) + 0, (locId * locRecordSize) + 2).replace(/\\u0000.*/, '');\n\t\t\t\tgeodata.region = locBuffer.toString('utf8', (locId * locRecordSize) + 2, (locId * locRecordSize) + 4).replace(/\\u0000.*/, '');\n\t\t\t\tgeodata.ll = [locBuffer.readInt32BE((locId * locRecordSize) + 4) / 10000, locBuffer.readInt32BE((locId * locRecordSize) + 8) / 10000];\n\t\t\t\tgeodata.metro = locBuffer.readInt32BE((locId * locRecordSize) + 12);\n\t\t\t\tgeodata.zip = locBuffer.readInt32BE((locId * locRecordSize) + 16);\n\t\t\t\tgeodata.city = locBuffer.toString('utf8', (locId * locRecordSize) + 20, (locId * locRecordSize) + locRecordSize).replace(/\\u0000.*/, '');\n\t\t\t}\n\n\t\t\treturn geodata;\n\t\t} else if (fline === cline) {\n\t\t\treturn null;\n\t\t} else if (fline === (cline - 1)) {\n\t\t\tif (line === fline) {\n\t\t\t\tfline = cline;\n\t\t\t} else {\n\t\t\t\tcline = fline;\n\t\t\t}\n\t\t} else if (floor > ip) {\n\t\t\tcline = line;\n\t\t} else if (ceil < ip) {\n\t\t\tfline = line;\n\t\t}\n\t} while(1);\n}\n\nfunction lookup6(ip) {\n\tvar buffer = cache6.mainBuffer;\n\tvar recordSize = cache6.recordSize;\n\n\tvar geodata = {\n\t\trange: '',\n\t\tcountry: '',\n\t\tregion: '',\n\t\tcity: '',\n\t\tll: [0, 0]\n\t};\n\n\t// XXX We only use the first 8 bytes of an IPv6 address\n\t// This identifies the network, but not the host within\n\t// the network.  Unless at some point of time we have a\n\t// global peace treaty and single subnets span multiple\n\t// countries, this should not be a problem.\n\tfunction readip(line, offset) {\n\t\tvar ii = 0;\n\t\tvar ip = [];\n\n\t\tfor (ii = 0; ii < 2; ii++) {\n\t\t\tip.push(buffer.readUInt32BE((line * recordSize) + (offset * 16) + (ii * 4)));\n\t\t}\n\n\t\treturn ip;\n\t}\n\n\tcache6.lastIP = readip(cache6.lastLine, 1);\n\tcache6.firstIP = readip(0, 0);\n\n\tvar fline = 0;\n\tvar floor = cache6.lastIP;\n\tvar cline = cache6.lastLine;\n\tvar ceil = cache6.firstIP;\n\tvar line;\n\n\tif (utils.cmp6(ip, cache6.lastIP) > 0 || utils.cmp6(ip, cache6.firstIP) < 0) {\n\t\treturn null;\n\t}\n\n\tdo {\n\t\tline = Math.round((cline - fline) / 2) + fline;\n\t\tfloor = readip(line, 0);\n\t\tceil  = readip(line, 1);\n\n\t\tif (utils.cmp6(floor, ip) <= 0 && utils.cmp6(ceil, ip) >= 0) {\n\t\t\tif (recordSize === RECORD_SIZE6) {\n\t\t\t\tgeodata.country = buffer.toString('utf8', (line * recordSize) + 32, (line * recordSize) + 34).replace(/\\u0000.*/, '');\n\t\t\t} else {\n\t\t\t\tgeodata.range = [floor, ceil];\n\t\t\t\tgeodata.country = buffer.toString('utf8', (line * recordSize) + 32, (line * recordSize) + 34).replace(/\\u0000.*/, '');\n\t\t\t\tgeodata.region = buffer.toString('utf8', (line * recordSize) + 34, (line * recordSize) + 36).replace(/\\u0000.*/, '');\n\t\t\t\tgeodata.ll = [buffer.readInt32BE((line * recordSize) + 36) / 10000, buffer.readInt32BE((line * recordSize) + 40) / 10000];\n\t\t\t\tgeodata.city = buffer.toString('utf8', (line * recordSize) + 44, (line * recordSize) + recordSize).replace(/\\u0000.*/, '');\n\t\t\t}\n\n\t\t\t// We do not currently have detailed region/city info for IPv6, but finally have coords\n\t\t\treturn geodata;\n\t\t} else if (fline === cline) {\n\t\t\treturn null;\n\t\t} else if (fline === (cline - 1)) {\n\t\t\tif (line === fline) {\n\t\t\t\tfline = cline;\n\t\t\t} else {\n\t\t\t\tcline = fline;\n\t\t\t}\n\t\t} else if (utils.cmp6(floor, ip) > 0) {\n\t\t\tcline = line;\n\t\t} else if (utils.cmp6(ceil, ip) < 0) {\n\t\t\tfline = line;\n\t\t}\n\t} while(1);\n}\n\nfunction get4mapped(ip) {\n    var ipv6 = ip.toUpperCase();\n    var v6prefixes = ['0:0:0:0:0:FFFF:', '::FFFF:'];\n    for (var i = 0; i < v6prefixes.length; i++) {\n        var v6prefix = v6prefixes[i];\n        if (ipv6.indexOf(v6prefix) == 0) {\n            return ipv6.substring(v6prefix.length);\n        }\n    }\n    return null;\n}\n\nfunction preload(callback) {\n\tvar datFile;\n\tvar datSize;\n\tvar asyncCache = {\n\t\tfirstIP: null,\n\t\tlastIP: null,\n\t\tlastLine: 0,\n\t\tlocationBuffer: null,\n\t\tlocationRecordSize: 64,\n\t\tmainBuffer: null,\n\t\trecordSize: 12\n\t};\n\n\t//when the preload function receives a callback, do the task asynchronously\n\tif (typeof arguments[0] === 'function') {\n\t\tasync.series([\n\t\t\tfunction (cb) {\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.cityNames, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tasyncCache.locationBuffer = new Buffer(datSize);\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache.locationBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.city, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF') {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfs.open(dataFiles.country, 'r', function (err, file) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcb(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\t\t\tasyncCache.recordSize = RECORD_SIZE;\n\n\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tasyncCache.mainBuffer = new Buffer(datSize);\n\t\t\t\t\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache.mainBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\t//keep old cache\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasyncCache.lastLine = (datSize / asyncCache.recordSize) - 1;\n\t\t\t\t\t\tasyncCache.lastIP = asyncCache.mainBuffer.readUInt32BE((asyncCache.lastLine * asyncCache.recordSize) + 4);\n\t\t\t\t\t\tcache4 = asyncCache;\n\t\t\t\t\t}\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t}\n\t\t]);\n\t} else {\n\t\ttry {\n\t\t\tdatFile = fs.openSync(dataFiles.cityNames, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\n\t\t\tif (datSize === 0) {\n\t\t\t\tthrow {\n\t\t\t\t\tcode: 'EMPTY_FILE'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcache4.locationBuffer = new Buffer(datSize);\n\t\t\tfs.readSync(datFile, cache4.locationBuffer, 0, datSize, 0);\n\t\t\tfs.closeSync(datFile);\n\n\t\t\tdatFile = fs.openSync(dataFiles.city, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t} catch(err) {\n\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF' && err.code !== 'EMPTY_FILE') {\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tdatFile = fs.openSync(dataFiles.country, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t\tcache4.recordSize = RECORD_SIZE;\n\t\t}\n\n\t\tcache4.mainBuffer = new Buffer(datSize);\n\t\tfs.readSync(datFile, cache4.mainBuffer, 0, datSize, 0);\n\n\t\tfs.closeSync(datFile);\n\n\t\tcache4.lastLine = (datSize / cache4.recordSize) - 1;\n\t\tcache4.lastIP = cache4.mainBuffer.readUInt32BE((cache4.lastLine * cache4.recordSize) + 4);\n\t\tcache4.firstIP = cache4.mainBuffer.readUInt32BE(0);\n\t}\n}\n\nfunction preload6(callback) {\n\tvar datFile;\n\tvar datSize;\n\tvar asyncCache6 = {\n\t\tfirstIP: null,\n\t\tlastIP: null,\n\t\tlastLine: 0,\n\t\tmainBuffer: null,\n\t\trecordSize: 58\n\t};\n\n\t//when the preload function receives a callback, do the task asynchronously\n\tif (typeof arguments[0] === 'function') {\n\t\tasync.series([\n\t\t\tfunction (cb) {\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.open(dataFiles.city6, 'r', function (err, file) {\n\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\tcb2(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF') {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfs.open(dataFiles.country6, 'r', function (err, file) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\tcb(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdatFile = file;\n\t\t\t\t\t\t\t\tfs.fstat(datFile, function (err, stats) {\n\t\t\t\t\t\t\t\t\tdatSize = stats.size;\n\t\t\t\t\t\t\t\t\tasyncCache6.recordSize = RECORD_SIZE6;\n\n\t\t\t\t\t\t\t\t\tcb();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcb();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfunction () {\n\t\t\t\tasyncCache6.mainBuffer = new Buffer(datSize);\n\t\t\t\t\n\t\t\t\tasync.series([\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.read(datFile, asyncCache6.mainBuffer, 0, datSize, 0, cb2);\n\t\t\t\t\t},\n\t\t\t\t\tfunction (cb2) {\n\t\t\t\t\t\tfs.close(datFile, cb2);\n\t\t\t\t\t}\n\t\t\t\t], function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\t//keep old cache\n\t\t\t\t\t} else {\n\t\t\t\t\t\tasyncCache6.lastLine = (datSize / asyncCache6.recordSize) - 1;\n\t\t\t\t\t\tcache6 = asyncCache6;\n\t\t\t\t\t}\n\t\t\t\t\tcallback(err);\n\t\t\t\t});\n\t\t\t}\n\t\t]);\n\t} else {\n\t\ttry {\n\t\t\tdatFile = fs.openSync(dataFiles.city6, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\n\t\t\tif (datSize === 0) {\n\t\t\t\tthrow {\n\t\t\t\t\tcode: 'EMPTY_FILE'\n\t\t\t\t};\n\t\t\t}\n\t\t} catch(err) {\n\t\t\tif (err.code !== 'ENOENT' && err.code !== 'EBADF' && err.code !== 'EMPTY_FILE') {\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\tdatFile = fs.openSync(dataFiles.country6, 'r');\n\t\t\tdatSize = fs.fstatSync(datFile).size;\n\t\t\tcache6.recordSize = RECORD_SIZE6;\n\t\t}\n\n\t\tcache6.mainBuffer = new Buffer(datSize);\n\t\tfs.readSync(datFile, cache6.mainBuffer, 0, datSize, 0);\n\n\t\tfs.closeSync(datFile);\n\n\t\tcache6.lastLine = (datSize / cache6.recordSize) - 1;\n\t}\n}\n\nmodule.exports = {\n\tcmp: utils.cmp,\n\n\tlookup: function(ip) {\n\t\tif (!ip) {\n\t\t\treturn null;\n\t\t} else if (typeof ip === 'number') {\n\t\t\treturn lookup4(ip);\n\t\t} else if (net.isIP(ip) === 4) {\n\t\t\treturn lookup4(utils.aton4(ip));\n\t\t} else if (net.isIP(ip) === 6) {\n\t\t\tvar ipv4 = get4mapped(ip);\n\t\t\tif (ipv4) {\n\t\t\t\treturn lookup4(utils.aton4(ipv4));\n\t\t\t} else {\n\t\t\t\treturn lookup6(utils.aton6(ip));\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tpretty: function(n) {\n\t\tif (typeof n === 'string') {\n\t\t\treturn n;\n\t\t} else if (typeof n === 'number') {\n\t\t\treturn utils.ntoa4(n);\n\t\t} else if (n instanceof Array) {\n\t\t\treturn utils.ntoa6(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// Start watching for data updates. The watcher waits one minute for file transfer to \n\t// completete before triggering the callback.\n\tstartWatchingDataUpdate: function (callback) {\n\t\tfsWatcher.makeFsWatchFilter(watcherName, geodatadir, 60*1000, function () {\n\t\t\t//Reload data\n\t\t\tasync.series([\n\t\t\t\tfunction (cb) {\n\t\t\t\t\tpreload(cb);\n\t\t\t\t},\n\t\t\t\tfunction (cb) {\n\t\t\t\t\tpreload6(cb);\n\t\t\t\t}\n\t\t\t], callback);\n\t\t});\n\t},\n\n\t// Stop watching for data updates.\n\tstopWatchingDataUpdate: function () {\n\t\tfsWatcher.stopWatching(watcherName);\n\t}\n};\n\npreload();\npreload6();\n\n//lookup4 = gen_lookup('geoip-country.dat', 4);\n//lookup6 = gen_lookup('geoip-country6.dat', 16);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/geoip-lite/lib/geoip.js\n// module id = 7\n// module chunks = 0","module.exports = require(\"net\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"net\"\n// module id = 8\n// module chunks = 0","var utils = module.exports = {};\n\nutils.aton4 = function(a) {\n  a = a.split(/\\./);\n  return ((parseInt(a[0], 10)<<24)>>>0) + ((parseInt(a[1], 10)<<16)>>>0) + ((parseInt(a[2], 10)<<8)>>>0) + (parseInt(a[3], 10)>>>0);\n};\n\nutils.aton6 = function(a) {\n  a = a.replace(/\"/g, '').split(/:/);\n\n  var l = a.length - 1;\n  var i;\n\n  if (a[l] === '') {\n    a[l] = 0;\n  }\n\n  if (l < 7) {\n    a.length = 8;\n\n    for (i = l; i >= 0 && a[i] !== ''; i--) {\n      a[7-l+i] = a[i];\n    }\n  }\n\n  for (i = 0; i < 8; i++) {\n    if (!a[i]) {\n      a[i]=0;\n    } else {\n      a[i] = parseInt(a[i], 16);\n    }\n  }\n\n  var r = [];\n  for (i = 0; i<4; i++) {\n    r.push(((a[2*i]<<16) + a[2*i+1])>>>0);\n  }\n\n  return r;\n};\n\n\nutils.cmp = function(a, b) {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return (a < b ? -1 : (a > b ? 1 : 0));\n  }\n\n  if (a instanceof Array && b instanceof Array) {\n    return this.cmp6(a, b);\n  }\n\n  return null;\n};\n\nutils.cmp6 = function(a, b) {\n  for (var ii = 0; ii < 2; ii++) {\n    if (a[ii] < b[ii]) {\n      return -1;\n    }\n\n    if (a[ii] > b[ii]) {\n      return 1;\n    }\n  }\n\n  return 0;\n};\n\nutils.isPrivateIP = function(addr) {\n  addr = addr.toString();\n\n  return addr.match(/^10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^172\\.16\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})/) != null ||\n    addr.match(/^fc00:/) != null || addr.match(/^fe80:/) != null;\n};\n\nutils.ntoa4 = function(n) {\n  n = n.toString();\n  n = '' + (n>>>24&0xff) + '.' + (n>>>16&0xff) + '.' + (n>>>8&0xff) + '.' + (n&0xff);\n\n  return n;\n};\n\nutils.ntoa6 = function(n) {\n  var a = \"[\";\n\n  for (var i = 0; i<n.length; i++) {\n    a += (n[i]>>>16).toString(16) + ':';\n    a += (n[i]&0xffff).toString(16) + ':';\n  }\n\n  a = a.replace(/:$/, ']').replace(/:0+/g, ':').replace(/::+/, '::');\n\n  return a;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/geoip-lite/lib/utils.js\n// module id = 9\n// module chunks = 0","var fs = require('fs'),\n    path = require('path'),\n    FSWatcher = {};\n\n/**\n * Takes a directory/file and watch for change. Upon change, call the\n * callback.\n *\n * @param {String} name: name of this watcher\n * @param {String} directory: path to the directory to watch\n * @param {String} [filename]: (optional) specific filename to watch for,\n *     watches for all files in the directory if unspecified\n * @param {Integer} cooldownDelay: delay to wait before triggering the callback\n * @param {Function} callback: function () : called when changes are detected\n**/\nfunction makeFsWatchFilter(name, directory, filename, cooldownDelay, callback) {\n\tvar cooldownId = null;\n\n\t//Delete the cooldownId and callback the outer function\n\tfunction timeoutCallback() {\n\t\tcooldownId = null;\n\t\tcallback();\n\t}\n\n\t//This function is called when there is a change in the data directory\n\t//It sets a timer to wait for the change to be completed\n\tfunction onWatchEvent(event, changedFile) {\n\t\tvar filePath = path.join(directory, changedFile);\n\n\t\tif (!filename || filename === changedFile) {\n\t\t\tfs.exists(filePath, function onExists(exists) {\n\t\t\t\tif (!exists) {\n\t\t\t\t\t// if the changed file no longer exists, it was a deletion.\n\t\t\t\t\t// we ignore deleted files\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//At this point, a new file system activity has been detected,\n\t\t\t\t//We have to wait for file transfert to be finished before moving on.\n\n\t\t\t\t//If a cooldownId already exists, we delete it\n\t\t\t\tif (cooldownId !== null) {\n\t\t\t\t\tclearTimeout(cooldownId);\n\t\t\t\t\tcooldownId = null;\n\t\t\t\t}\n\n\t\t\t\t//Once the cooldownDelay has passed, the timeoutCallback function will be called\n\t\t\t\tcooldownId = setTimeout(timeoutCallback, cooldownDelay);\n\t\t\t});\n\t\t}\n\t}\n\n\t//Manage the case where filename is missing (because it's optionnal)\n\tif (typeof cooldownDelay === 'function') {\n\t\tcallback = cooldownDelay;\n\t\tcooldownDelay = filename;\n\t\tfilename = null;\n\t}\n\n\tif (FSWatcher[name]) {\n\t\tstopWatching(name);\n\t}\n\n\tFSWatcher[name] = fs.watch(directory, onWatchEvent);\n}\n\n/**\n * Take a FSWatcher object and close it.\n *\n * @param {string} name: name of the watcher to close\n *\n**/\nfunction stopWatching(name) {\n\tFSWatcher[name].close();\n}\n\nmodule.exports.makeFsWatchFilter = makeFsWatchFilter;\nmodule.exports.stopWatching = stopWatching;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/geoip-lite/lib/fsWatcher.js\n// module id = 10\n// module chunks = 0","module.exports = require(\"async\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async\"\n// module id = 11\n// module chunks = 0"],"sourceRoot":""}